(this["webpackJsonpaiff-explorer"]=this["webpackJsonpaiff-explorer"]||[]).push([[0],[,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return z}));var a=n(6),s=n.n(a),i=n(9),r=n(3),c=n(0),o=n(2),l=(n(23),n(10)),u=n(1),p=n(11);function f(e){return new Promise(((t,n)=>{const a=new FileReader;a.readAsArrayBuffer(e),a.addEventListener("load",(()=>{t(a.result)})),a.addEventListener("error",(()=>{n(a.error)}))}))}const d={border:"solid 1px black"},h={margin:"8px 8px",wordWrap:"break-word"},m={margin:"8px 0",wordWrap:"break-word"};function y({object:e}){return Object(c.jsx)("div",{style:Object(o.a)(Object(o.a)({},d),{},{margin:"8px 0px"}),children:Object.keys(e).map((t=>{const n=e[t];return n&&"object"===typeof n?Array.isArray(n)?Object(c.jsxs)("div",{style:h,children:[t,":"," ",n.map(((e,t)=>Object(c.jsx)(y,{object:e},t)))]},t):"number"===typeof n.length?Object(c.jsxs)("div",{style:h,children:[t,": ","Buffer {size: ".concat(n.length,"}")]},t):Object(c.jsxs)("div",{style:h,children:[t,": ",Object(c.jsx)(y,{object:n})]},t):Object(c.jsxs)("div",{style:h,children:[t,": ",JSON.stringify(n)]},t)}))})}function b({chunk:e}){const t=e.ckID,n=e.ckSize,a=e.localChunks;let s=e.parsed;return"FORM"===t&&(s={formType:e.formType}),Object(c.jsx)("div",{style:Object(o.a)(Object(o.a)({},d),{},{margin:"8px 0px"}),children:Object(c.jsxs)(p.a,{style:h,startOpen:!0,summary:t,summaryStyle:{width:"100%",cursor:"pointer",fontWeight:"bold"},children:[Object(c.jsxs)("div",{style:m,children:["chunk size: ",n]}),s&&Object(c.jsxs)("div",{style:m,children:[t," fields:"," ","object"===typeof s?Object(c.jsx)(y,{object:s}):JSON.stringify(s)]}),a&&Object(c.jsxs)("div",{style:m,children:["local chunks:",a.map(((e,t)=>Object(c.jsx)(b,{chunk:e},t)))]}),Object(c.jsxs)("div",{style:Object(o.a)(Object(o.a)({},m),{},{fontSize:"0.8em",color:"#777"}),children:["end ",t," chunk"]})]})})}function z(){const t=Object(u.useState)(null),n=Object(r.a)(t,2),a=n[0],o=n[1],p=Object(u.useState)(null),d=Object(r.a)(p,2),h=d[0],m=d[1],y=Object(u.useCallback)(function(){var t=Object(i.a)(s.a.mark((function t(n){var a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.currentTarget.files,t.next=3,f(a[0]);case 3:i=t.sent;try{o(l.parse(new e(i),{includeRawChunks:!0})),m(null)}catch(s){o(null),m(s)}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]);return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("h1",{children:"AIFF explorer"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"This tool visualizes the chunks in an AIFF file."}),Object(c.jsx)("input",{type:"file",id:"input",onChange:y,style:{cursor:"pointer",height:a?null:300,width:a?null:600,display:a?null:"block",border:"dashed #aaa 1px",padding:16}})]}),h&&Object(c.jsxs)("p",{children:["Error: this is probably not a valid AIFF file (",h.toString(),")"]}),a&&a.fileChunks.map(((e,t)=>Object(c.jsx)(b,{chunk:e},t))),!(a||h)&&Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Select (or drag and drop) an .aif, .aiff, or .aifc file to begin."}),Object(c.jsxs)("p",{children:["Some sample files can be found"," ",Object(c.jsx)("a",{href:"http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/AIFF/Samples.html",children:"here"}),". Info about the AIFF specification can be found"," ",Object(c.jsx)("a",{href:"http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/AIFF/AIFF.html",children:"here"}),"."]})]})]})}}).call(this,n(5).Buffer)},,function(e,t,n){(function(t){const a=n(24),s=n(25),i=s.BufferStruct,r=(s.BufferStructUnion,s.BufferStructBase);const c=new class extends r{constructor(){super({name:"PString"})}parse(e,t,n=null){const a=e.readUInt8(t),s=e.slice(t+1,t+1+a).toString("utf8"),i=(r=1+a,c=2,Math.ceil(r/c)*c);var r,c;return this.lastOffset=t+i,s}serialize(e,n=null){if(!e)throw new Error("missing argument 'data' when serializing ".concat(this.getName()));const a=[t.from([e.length]),t.from(e)];return(1+e.length)%2===1&&a.push(t.alloc(1)),t.concat(a)}},o=new i({name:"AIFFChunk",endian:"big",fields:{ckID:{type:"utf8",size:4},ckSize:{type:"int",size:4},chunkData:{type:"bytes",align:2,size:e=>e.ckSize}}}),l=new i({name:"AIFFCommon",endian:"big",fields:{numChannels:{type:"int",size:2},numSampleFrames:{type:"uint",size:4},sampleSize:{type:"int",size:2},sampleRate:{type:"bytes",size:10}}}),u=new i({name:"AIFCCommon",endian:"big",fields:{numChannels:{type:"int",size:2},numSampleFrames:{type:"uint",size:4},sampleSize:{type:"int",size:2},sampleRate:{type:"bytes",size:10},compressionType:{type:"utf8",size:4},compressionName:{type:c}}}),p=new i({name:"AIFCApplicationSpecific",endian:"big",fields:{applicationSignature:{type:"utf8",size:4},data:{type:"bytes",size:(e,t)=>t.dataSize}}}),f=new i({name:"AIFFSoundData",endian:"big",fields:{offset:{type:"uint",size:4},blockSize:{type:"uint",size:4},soundData:{type:"bytes",size:(e,t)=>t.soundDataSize}}}),d={type:"int",size:2},h=new i({name:"AIFFMarker",endian:"big",fields:{id:d,position:{type:"uint",size:4},markerName:{type:c}}}),m=new i({name:"AIFFMarkerChunk",endian:"big",fields:{numMarkers:{type:"uint",size:2},markers:{type:h,arrayElements:e=>e.numMarkers}}}),y=new i({name:"AIFFComment",endian:"big",fields:{timeStamp:{type:"uint",size:4},marker:d,count:{type:"uint",size:2},text:{type:"utf8",size:e=>e.count}}}),b=new i({name:"AIFFLoop",endian:"big",fields:{playMode:{type:"int",size:2},beginLoop:d,endLoop:d}}),z=new i({name:"AIFFInstrument",endian:"big",fields:{baseNote:{type:"int",size:1},detune:{type:"int",size:1},lowNote:{type:"int",size:1},highNote:{type:"int",size:1},lowVelocity:{type:"int",size:1},highVelocity:{type:"int",size:1},gain:{type:"int",size:2},sustainLoop:{type:b},releaseLoop:{type:b}}}),g="NAME",j="AUTH",w="(c) ",S="ANNO",k=new i({name:"AIFFText",endian:"big",fields:{text:{type:"utf8",size:(e,t)=>t.dataSize}}}),O=new i({name:"AIFCFormat",endian:"big",fields:{timestamp:{type:"uint",size:4}}});function F(e,t){return o.serialize({ckID:e,ckSize:t.length,chunkData:t})}e.exports={serialize:function({soundData:e,numChannels:n,sampleRate:s,sampleSize:i,formType:r,compressionType:c,compressionName:o,chunks:d,rawChunks:h}){const b=Math.floor(e.length/n/(i/8)),x=t.from(a.ConvertToIeeeExtended(s)),I="AIFC"===r?F("FVER",O.serialize({timestamp:2726318400})):null,A=F("COMM","AIFC"===r?u.serialize({numChannels:n,numSampleFrames:b,sampleSize:i,sampleRate:x,compressionType:c,compressionName:o}):l.serialize({numChannels:n,numSampleFrames:b,sampleSize:i,sampleRate:x})),C=F("SSND",f.serialize({offset:0,blockSize:0,soundData:e},{soundDataSize:e.length})),v=[];(d||[]).forEach((e=>{const t=e.data;let n;switch(e.type){case"SSND":case"FVER":case"COMM":return;case"APPL":n=p.serialize(t,{dataSize:t.data.length});break;case"MARK":n=m.serialize(t);break;case"COMT":n=y.serialize(t);break;case"INST":n=z.serialize(t);break;case g:case j:case w:case S:n=k.serialize(t,{dataSize:t.text.length})}n&&v.push(F(e.type,n))}));const N=t.from("AIFC"===r?"AIFC":"AIFF","utf8");return F("FORM",t.concat([N,I,A,C,...v,...h||[]].filter(Boolean)))},parse:function(e,t={}){let n=0,s={};const i=[],r=[];for(;n<e.length;){const t=o.parse(e,n);t.startOffset=n,t.endOffset=o.lastOffset,i.push(t),n=o.lastOffset}return i.filter((e=>"FORM"===e.ckID)).forEach((e=>{let t=0;const n=e.chunkData.slice(0,4).toString("utf8");e.formType=n,"AIFF"!==n&&"AIFC"!==n||(s.formType=n),t+=4;const i=[];for(;t<e.chunkData.length;){const c=o.parse(e.chunkData,t);switch(c.startOffset=t,c.endOffset=o.lastOffset,c.ckSize,c.ckID){case"COMM":c.parsed="AIFC"===n?u.parse(c.chunkData):l.parse(c.chunkData),c.parsed.sampleRate=a.ConvertFromIeeeExtended(c.parsed.sampleRate),s.sampleRate=c.parsed.sampleRate,s.sampleSize=c.parsed.sampleSize,s.numChannels=c.parsed.numChannels,s.compressionType=c.parsed.compressionType,s.compressionName=c.parsed.compressionName;break;case"SSND":c.parsed=f.parse(c.chunkData,0,{soundDataSize:c.ckSize-8}),s.soundData=c.parsed.soundData;break;case"MARK":c.parsed=m.parse(c.chunkData,0);break;case"COMT":c.parsed=y.parse(c.chunkData,0);break;case"INST":c.parsed=z.parse(c.chunkData,0);break;case g:case j:case w:case S:c.parsed=k.parse(c.chunkData,0,{dataSize:c.ckSize});break;case"APPL":c.parsed=p.parse(c.chunkData,0,{dataSize:c.ckSize-4});break;case"FVER":c.parsed=O.parse(c.chunkData)}r.push({type:c.ckID,data:c.parsed}),i.push(c),t=o.lastOffset}e.localChunks=i})),t.includeRawChunks&&(s.fileChunks=i),s.chunks=r,s},PString:c,LoopPlayMode:{NoLooping:0,ForwardLooping:1,ForwardBackwardLooping:2}}}).call(this,n(5).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),s=n(3),i=n(1),r=n.n(i);function c({summary:e,children:t,style:n,summaryStyle:i,startOpen:c}){const o=r.a.useState(c),l=Object(s.a)(o,2),u=l[0],p=l[1],f=r.a.useCallback((e=>{e.preventDefault(),e.stopPropagation(),p(!u)}),[u]);return Object(a.jsxs)("details",{open:u,style:n,children:[Object(a.jsx)("summary",{onClick:f,style:i,children:e}),u&&t]})}},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),i=n(7),r=n.n(i),c=n(8);const o=document.getElementById("root");r.a.render(Object(a.jsx)(s.StrictMode,{children:Object(a.jsx)(c.a,{})}),o)},,,,,,,,,,,function(e,t,n){},function(e,t){const n=(e,t)=>e*Math.pow(2,t);const a=e=>e-2147483648+2147483647+1;const s=e=>(e-2147483647|0)-1+2147483648;e.exports={ConvertFromIeeeExtended:function(e){let t,a,i,r;return a=(127&e[0])<<8|255&e[1],i=(255&e[2])<<24|(255&e[3])<<16|(255&e[4])<<8|255&e[5],r=(255&e[6])<<24|(255&e[7])<<16|(255&e[8])<<8|255&e[9],0==a&&0==i&&0==r?t=0:32767==a?t=1/0:(a-=16383,t=n(s(i),a-=31),t+=n(s(r),a-=32)),128&e[0]?-t:t},ConvertToIeeeExtended:function(e){let t,s,i,r,c,o,l=new Array(10).fill(0);if(e<0?(t=32768,e*=-1):t=0,0==e)s=0,c=0,o=0;else{const l=function(e){const t=[e=Number(e),0];if(0!==e&&Number.isFinite(e)){const n=Math.abs(e),a=Math.log2||function(e){return Math.log(e)*Math.LOG2E};let s=Math.max(-1023,Math.floor(a(n))+1),i=n*Math.pow(2,-s);for(;i<.5;)i*=2,s--;for(;i>=1;)i*=.5,s++;e<0&&(i=-i),t[0]=i,t[1]=s}return t}(e);i=l[0],s=l[1],s>16384||!(i<1)?(s=32767|t,c=0,o=0):(s+=16382,s<0&&(i=n(i,s),s=0),s|=t,i=n(i,32),r=Math.floor(i),c=a(r),i=n(i-r,32),r=Math.floor(i),o=a(r))}return l[0]=s>>8,l[1]=s,l[2]=c>>24,l[3]=c>>16,l[4]=c>>8,l[5]=c,l[6]=o>>24,l[7]=o>>16,l[8]=o>>8,l[9]=o,l}}},function(e,t,n){(function(t){function n(e,t){if(null==e)throw new Error("unexpected null"+(t?": "+t:""));return e}function a(e,t){if(isNaN(e))throw new Error("unexpected NaN"+(t?": "+t:""));return e}const s={uint:"UInt",int:"Int",float:"Float",double:"Double",bigint:"BigInt",biguint:"BigUint",char:"UInt"},i=new Set(["bytes","utf8"]);function r(e,t,n){return"".concat(s[e]).concat(8*t).concat(1==t?"":"big"==n?"BE":"LE")}function c(e,t){return Math.ceil(e/t)*t}function o(e,t){return null!=e.align?c(a(t),a(e.align)):a(t)}class l{constructor(e){this.schema=e,this.lastOffset=0}parse(e,t,n=null){}serialize(e,t=null){}getStaticSize(){throw new Error("getStaticSize not implemented on: "+this.constructor.name)}getName(){return this.schema.name||this.constructor.name}}class u{constructor({members:e,selectMember:t}){this.selectMember=t,this.members=e,this.size=Math.max(...e.map((e=>e.getStaticSize())))}}e.exports={BufferStruct:class extends l{constructor(...e){super(...e),this._staticSize=null}parse(e,t,n=null){const s={};let c=t||0;if(Object.keys(this.schema.fields).forEach((t=>{const u=this._getFieldConfig(t,s,n),p=u.field,f=u.endian,d=u.size,h=u.type,m=i.has(h)?(e,n)=>{if(null==d)throw new Error("can't parse field of type 'bytes' without predetermined size");if(e.length<n+d)throw new Error("tried to read ".concat(d," bytes but only ").concat(e.length-n," remaining for field ").concat(t," on ").concat(this.getName()));const a=e.slice(n,n+d);let s=a;return"utf8"===h&&(s=a.toString("utf8")),{value:s,parsedSize:d}}:h instanceof l?(e,t)=>({value:h.parse(e,t,n),parsedSize:null!=d?d:h.lastOffset-t}):(e,n)=>{const a="read".concat(r(h,d,f)),s=e[a](n);return this.schema.traceReads&&console.log(a,{fieldName:t,type:h,size:d,endian:f,startOffset:n,value:s}),{value:s,parsedSize:d}},y=(e,n)=>{const s=m(e,a(n)),i=s.value,r=s.parsedSize;if(null!=d&&r>d)throw new Error("parsed size ".concat(r," larger than predetermined size ").concat(d," for field ").concat(t," on ").concat(this.getName()));let c=o(p,null!=d?d:r);if(null!=d){const e=o(p,d);if(c>e)throw new Error("aligned parsed size ".concat(c," larger than aligned predetermined size ").concat(e," for field ").concat(t," on ").concat(this.getName()))}return{value:i,consumedSize:a(c)}};if(p.arrayElements){const i="function"===typeof p.arrayElements?p.arrayElements(s,n):p.arrayElements,r=new Array(i);for(var b=0;b<i;++b){const t=y(e,c),n=t.value,s=t.consumedSize;c+=a(s),r[b]=n}s[t]=r}else{const n=y(e,c),i=n.value,r=n.consumedSize;c+=a(r),s[t]=i}})),isNaN(c))throw new Error("invalid offset while parsing ".concat(this.getName()));return this.lastOffset=c,s}_getFieldConfig(e,t,a){const r=n(this.schema.fields[e],"".concat(e," schema is missing")),c=r.endian||this.schema.endian||"little",o=n(r.type,"".concat(e," type"));if(!(o instanceof l||o instanceof u||o in s||i.has(o)))throw new Error("unsupported type ".concat(o," in ").concat(e));let p="function"===typeof r.size?r.size(t,a):r.size;i.has(o)||o instanceof l||(p=o instanceof u?o.size:n(p,"".concat(e," size")));let f=o;if(o instanceof u&&(f=o.selectMember(t,a),null==f))throw new Error("failed to refine union type in field ".concat(e," on ").concat(this.getName()));return{field:r,endian:c,size:p,type:f}}serialize(e,n=null){if(!e)throw new Error("missing argument 'data' when serializing ".concat(this.getName()));const a=[];return Object.keys(this.schema.fields).forEach((s=>{const o=this._getFieldConfig(s,e,n),u=o.field,p=o.endian,f=o.size,d=o.type;let h;if(!(s in e)){if(!("default"in u))throw new Error("missing field ".concat(s," when serializing ").concat(this.getName()));h=u.default}h=e[s];const m=i.has(d)?e=>{let n=e;"utf8"===d&&(n=t.from(e,"utf8"));const a=null==f?n.length:f,s=t.alloc(a);return n.copy(s,0,0,a),s}:d instanceof l?e=>d.serialize(e,n):e=>{const n="write".concat(r(d,f,p)),a=t.alloc(f);return a[n](e),this.schema.traceWrites&&console.log(n,{fieldName:s,type:d,size:f,endian:p,value:e}),a},y=e=>{const n=m(e),a=n.length;if(null!=f&&a>f)throw new Error("serialized size ".concat(a," larger than predetermined size ").concat(f," for field ").concat(s," on ").concat(this.getName()));let i=n;if(null!=u.align){const e=c(a,u.align),r=c(f,u.align);if(e>r)throw new Error("serialized aligned size ".concat(i.length," larger than predetermined size (aligned) ").concat(r," for field ").concat(s," on ").concat(this.getName()));const o=t.alloc(e);n.copy(o),i=o}return i};if(u.arrayElements)for(var b=0;b<h.length;++b){const e=y(h[b]);a.push(e)}else{const e=y(h);a.push(e)}})),t.concat(a)}getStaticSize(){const e=this._staticSize;if(null!=e)return e;{let e=0;for(var t=0,n=Object.values(this.schema.fields);t<n.length;t++){const a=n[t];if("number"!=typeof a.size)throw new Error("cannot get static size of struct: "+this.getName());e+=o(a,a.size)}return this._staticSize=e,e}}},BufferStructBase:l,BufferStructUnion:u}}).call(this,n(5).Buffer)}],[[12,1,2]]]);
//# sourceMappingURL=main.1530fc60.chunk.js.map